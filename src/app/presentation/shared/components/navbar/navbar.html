<nav class="w-full">
  <div class="px-4 py-3">
    <div
      class="flex items-center justify-between rounded-[30px] border border-white/20 dark:border-white/10
             bg-neutral-50/60 dark:bg-neutral-900/40 backdrop-blur-[3px] shadow-[inset_0_1px_0_rgba(255,255,255,0.35)]
             px-4 py-4 h-17 sm:h-18 md:h-19"
    >
      <a href="/" class="inline-flex items-center gap-0 select-none h-full">
        <img
          src="assets/logo/black.png"
          alt="MM logo"
          class="h-full w-auto dark:hidden object-contain"
        />
        <img
          src="assets/logo/white.png"
          alt="MM logo"
          class="h-full w-auto hidden dark:block object-contain"
        />
      </a>

      <div class="flex items-center gap-2 sm:gap-4 h-full">
        <button
          #themeBtn
          type="button"
          (click)="toggleTheme()"
          class="h-full aspect-square grid place-items-center cursor-pointer select-none bg-transparent border-0 p-0 m-0 rounded-xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-700/20 dark:focus-visible:ring-white/20"
          aria-label="Cambiar tema"
        >
          <lucide-icon [name]="isDark() ? MoonIcon : SunIcon" class="w-full h-full text-neutral-800 dark:text-neutral-100"></lucide-icon>
          <span class="sr-only">Toggle theme</span>
        </button>

        <button
          #menuBtn
          type="button"
          (click)="onMenuClick()"
          class="h-full aspect-square grid place-items-center cursor-pointer select-none bg-transparent border-0 p-0 m-0 rounded-xl focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-neutral-700/20 dark:focus-visible:ring-white/20"
          aria-label="Abrir menÃº"
        >
          <lucide-icon [name]="MenuIcon" class="w-full h-full text-neutral-800 dark:text-neutral-100"></lucide-icon>
        </button>
      </div>
    </div>
  </div>

  @if (menuOpen()) {
    <div #panel class="fixed right-4 top-22 md:top-24 z-60 w-[min(88vw,380px)] rounded-2xl border border-white/10 bg-neutral-100/80 dark:bg-neutral-900/80 backdrop-blur-md shadow-[0_10px_30px_rgba(0,0,0,0.25)] px-4 py-3 md:px-5 md:py-4">
      <ul class="flex flex-col">
        @for (item of menuItems; track item.label) {
          <li>
            <button #menuItem type="button"
              class="group w-full flex items-center gap-3 md:gap-4 px-2 md:px-3 py-3 rounded-xl hover:bg-neutral-200/50 dark:hover:bg-neutral-800/50 transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-primary-500/30">
              <span class="grid place-items-center h-9 w-9 rounded-lg bg-neutral-200/60 dark:bg-neutral-800/60 text-neutral-700 dark:text-neutral-200 group-hover:scale-105 transition-transform">
                <lucide-icon [name]="item.icon" class="h-5 w-5"></lucide-icon>
              </span>
              <span class="text-lg md:text-xl font-semibold tracking-tight text-neutral-800 dark:text-neutral-100">{{ item.label }}</span>
            </button>
          </li>
        }
      </ul>
    </div>
  }
</nav>

